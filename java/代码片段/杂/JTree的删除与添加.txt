import javax.swing.JApplet;
import javax.swing.JTree;
import javax.swing.JOptionPane;
import javax.swing.JButton;
import javax.swing.JPanel;
import javax.swing.JScrollPane;

import javax.swing.tree.DefaultTreeModel;
import javax.swing.tree.DefaultMutableTreeNode;

import java.awt.BorderLayout;

import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;

public class Test extends JApplet
{
	private JButton addNode;
	private JButton removeNode;
	private JTree tree;
	public Test()
	{
	    addNode=new JButton("Add node");
        removeNode=new JButton("Remove node");
        tree=new JTree();
        setUI();		
		addListener();
	}
	public void setUI()
	{
		JPanel p1=new JPanel();
		p1.add(addNode);
		p1.add(removeNode);
		
		this.add(new JScrollPane(tree),BorderLayout.CENTER);
		this.add(p1,BorderLayout.SOUTH);
	}
	public void addListener()
	{
		addNode.addActionListener(
		                                new ActionListener()
										{
											public void actionPerformed(ActionEvent e)
											{
												if(tree.getLastSelectedPathComponent()==null)//返回当前选定的节点中，最后一个路径组件
													return ;
												DefaultMutableTreeNode parent=(DefaultMutableTreeNode)tree.getLastSelectedPathComponent();
												String nodeName=JOptionPane.showInputDialog(null,"Input Dialog");
												parent.add(new DefaultMutableTreeNode(nodeName));
												((DefaultTreeModel)tree.getModel()).reload();
												
											}
										}
		                         );
		removeNode.addActionListener(
		                                new ActionListener()
										{
											public void actionPerformed(ActionEvent e)
											{
												if(tree.getLastSelectedPathComponent()==null)
													return ;
												DefaultMutableTreeNode parent=(DefaultMutableTreeNode)tree.getLastSelectedPathComponent();
												if(parent.isRoot())
												{
													System.out.println("It is root");
													return ;
												}
												parent.removeFromParent();
												((DefaultTreeModel)tree.getModel()).reload();	
											} 
										}
		                            );
	}
}