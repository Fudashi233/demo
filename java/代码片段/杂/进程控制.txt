import java.io.*;
public class Test 
{
    public static void main(String[] args)
    {
    	try
    	{
    		OSExecute.command("javap Test");
    	}
    	catch(OSExecuteException ex)
    	{
    		ex.printStackTrace();
    	}
    }
}
class OSExecuteException extends Exception
{          
	public OSExecuteException(String why)
	{
		super(why);
	}
}
class OSExecute
{
	public static void command(String command) throws OSExecuteException
	{
		boolean errorFlag = false;
		try
		{
			ProcessBuilder pB = new ProcessBuilder(command.split(" "));
			pB.directory(new File("D:/"));   //标准路径是要加斜杠的，不加的话有可能（估计是版本问题）会运行失败
			Process p = pB.start();
		    BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));
		    String s = null;
		    while((s = in.readLine())!=null)
		    	System.out.println(s);
		    BufferedReader error = new BufferedReader(new InputStreamReader(p.getErrorStream()));
		    while((s = error.readLine())!=null)
		    {
		    	System.out.println(s);
		    	errorFlag = true;
		    }
		}
		catch(Exception ex)
		{
			ex.printStackTrace();
		}
		if(errorFlag)
		    throw new OSExecuteException(command);
		          
	}
}
